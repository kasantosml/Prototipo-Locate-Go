<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fila Ativa</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<style>
:root{
  --primary:#7a0f14;
  --bg:#f2f2f2;
  --card:#ffffff;
  --text:#2b2b2b;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

body{
  background:var(--bg);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* HEADER */
.topbar{
  background:var(--primary);
  color:#fff;
  padding:16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
}

.topbar h1{
  font-size:20px;
  font-weight:600;
}

.topbar button{
  background:none;
  border:none;
  color:#fff;
  font-size:22px;
  cursor:pointer;
}

/* MENU HEADER (NOVO) */
.header-menu{
  position:absolute;
  top:60px;
  right:16px;
  background:#fff;
  border-radius:12px;
  box-shadow:0 12px 25px rgba(0,0,0,.15);
  overflow:hidden;
  display:none;
  z-index:20;
  max-width: 500px;
}

.header-menu.active{
  display:block;
}

.header-menu button{
  width:100%;
  padding:14px 8px;
  border:none;
  background:none;
  text-align:left;
  cursor:pointer;
  color: black;
  margin-left: 15px;
}

.header-menu button:hover{
  background:var(--primary);
  color:#ffffff;
}

/* MAIN */
main{
  flex:1;
  padding:20px;
}

.status{
  text-align:center;
  margin-bottom:20px;
}

.status h2{
  font-size:22px;
}

.status span{
  font-weight:bold;
  font-size:18px;
}

/* LISTA */
.queue{
  display:flex;
  flex-direction:column;
  gap:12px;
  max-width:420px;
  margin:auto;
}

.person{
  background:var(--card);
  padding:16px;
  border-radius:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
  position:relative;
}

.person-info{
  display:flex;
  flex-direction:column;
}

.person-info strong{
  font-size:15px;
  text-transform:uppercase;
}

.person-info small{
  opacity:.7;
}

.right{
  display:flex;
  align-items:center;
  gap:12px;
}

.time{
  font-size:13px;
  font-weight:bold;
}

/* DOTS */
.dots{
  cursor:pointer;
  font-size:18px;
}

.card-menu{
  position:absolute;
  top:55px;
  right:12px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
  overflow:hidden;
  transform:scale(0);
  transform-origin:top right;
  transition:.2s;
  z-index:10;
}

.card-menu.active{
  transform:scale(1);
}

.card-menu button{
  border:none;
  background:none;
  padding:12px 18px;
  width:100%;
  text-align:left;
  cursor:pointer;
}

.card-menu button:hover{
  background:var(--primary);
  color:#fff;
}

/* FOOTER */
footer{
  position:fixed;
  bottom:0;
  width:100%;
  background:#b1b1b1;
  display:flex;
  justify-content:space-between;
}

footer button{
  background:none;
  border:none;
  padding:15px 25px;
  font-size:25px;
  cursor:pointer;
}
</style>
</head>

<body>

<header class="topbar">
  <button onclick="window.location.href='gerencia.prototipo.html'">
    <i class="fa-solid fa-arrow-left" ></i>
  </button>

  <h1>Fila Inativa</h1>

  <button id="menuBtn">
    <i class="fa-solid fa-bars"></i>
  </button>

  <!-- MENU DE FILTROS (NOVO) -->
  <div class="header-menu" id="headerMenu" style="width: 200px;">
    <button data-filter="ordem">Ordem de chegada</button>
    <button data-filter="az">Ord. Crescente</button>
    <button data-filter="za">Ord. Decrescente</button>
    <button data-filter="hora">Horário</button>
  </div>
</header>

<main>
  <div class="status">
    <h2>Fila 00</h2>
    <span id="count">00 pessoas</span>
  </div>

  <div class="queue" id="queue"></div>
</main>

<footer>
  <a href="perfilEmpresario.montado.prototipo.html">
    <button><i class="fa-solid fa-user"></i></button>
  </a>

  <a href="gerencia.prototipo.html">
    <button><i class="fa-solid fa-house"></i></button>
  </a>
</footer>

<script>
// CLIENTES DE EXEMPLO
let clientes = [
  { nome:'CLIENTE 1', item:'CASQUINHA', hora:'11:40' },
  { nome:'CLIENTE 2', item:'PICOLÉ', hora:'11:55' },
  { nome:'CLIENTE 3', item:'CASCÃO', hora:'12:10' }
];

const queue = document.getElementById("queue");
const count = document.getElementById("count");
const menuBtn = document.getElementById("menuBtn");
const headerMenu = document.getElementById("headerMenu");

// Guarda ordem original
const ordemOriginal = [...clientes];

function render(){
  queue.innerHTML = "";

  clientes.forEach((c, index) => {
    const card = document.createElement("div");
    card.className = "person";

    card.onclick = () => {
  irParaPedido(c);
  };

    card.innerHTML = `
      <div class="person-info">
        <strong>${index + 1}° ${c.nome}</strong>
        <small>${c.item}</small>
      </div>

      <div class="right">
        <div class="time">${c.hora}</div>

        <div class="dots">
          <i class="fa-solid fa-ellipsis-vertical"></i>
        </div>
      </div>

      <div class="card-menu">
        <button data-action="Editar">Editar</button>
        <button data-action="Marcar">Marcar</button>
        <button data-action="Excluir">Excluir</button>
      </div>
    `;

    const dots = card.querySelector(".dots");
    const menu = card.querySelector(".card-menu");

    dots.onclick = (e) => {
      e.stopPropagation();
      document.querySelectorAll(".card-menu")
        .forEach(m => m.classList.remove("active"));
      menu.classList.toggle("active");
    };

    menu.onclick = (e) => {
      const action = e.target.dataset.action;

      if(action === "excluir"){
        clientes.splice(index, 1);
        render();
      }

      if(action === "editar"){
        alert("Editar cliente: " + c.nome);
      }
    };

    queue.appendChild(card);
  });

  count.textContent =
    `${String(clientes.length).padStart(2,"0")} pessoas`;
}

/* FILTROS DO CABEÇALHO */
menuBtn.onclick = (e) => {
  e.stopPropagation();
  headerMenu.classList.toggle("active");
};

headerMenu.onclick = (e) => {
  const f = e.target.dataset.filter;

  if(f === "ordem") clientes = [...ordemOriginal];
  if(f === "az") clientes.sort((a,b)=>a.nome.localeCompare(b.nome));
  if(f === "za") clientes.sort((a,b)=>b.nome.localeCompare(a.nome));
  if(f === "hora") clientes.sort((a,b)=>a.hora.localeCompare(b.hora));

  headerMenu.classList.remove("active");
  render();
};

/* FECHAR MENUS */
document.body.onclick = () => {
  headerMenu.classList.remove("active");
  document.querySelectorAll(".card-menu")
    .forEach(m => m.classList.remove("active"));
};

render();

//redirecionamento
function irParaPedido(cliente){
  // Você pode futuramente passar ID, nome, etc
  localStorage.setItem("clienteSelecionado", JSON.stringify(cliente));
  window.location.href = "pedido.prototipo.html";
}

</script>

</body>
</html>


