<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ger√™ncia de Filas</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
:root{
  --principal:#8c0a0a;
  --bg:#e5e5e5;
  --card:#fff;
}

/* RESET */
*{
  box-sizing:border-box;
  font-family:Arial,sans-serif;
}

body{
  margin:0;
  background:var(--bg);
  text-align:center;
}

/* HEADER */
header{
  background:linear-gradient(135deg,rgb(211,14,14),rgb(154,5,5));
  padding:18px 22px;
  display:flex;
  align-items:center;
  color:#fff;
}

header img{
  margin-left: 5px;
  width:60px;
  border-radius:50px;
}

/* empurra o menu para o EXTREMO direito */
.header-spacer{
  flex:1;
}

header i{
  font-size:26px;
  cursor:pointer;
}

/* MENU FILTRO (N√ÉO ALTERADO) */
.filter-container{
  position:relative;
  width:20px;
}

.filter-menu{
  position:absolute;
  right:0;
  top:40px;
  background:#fff;
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
  overflow:hidden;
  transform:scale(0);
  transform-origin:top right;
  transition:.25s;
  z-index:10;
}

.filter-menu.active{
  transform:scale(1);
}

.filter-menu button{
  width:100%;
  border:none;
  background:none;
  padding:15px 40px;
  text-align:left;
  cursor:pointer;
}

.filter-menu button:hover{
  background:var(--principal);
  color:#fff;
}


/* T√çTULO */
h2{
  margin:50px 0 10px;
}

#number{
  font-weight:bold;
  margin-bottom:65px;
}

/* CARDS */
#card-container{
  padding-bottom:160px;
}

.card{
  background:var(--card);
  width:90%;
  margin:15px auto;
  padding:18px;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  box-shadow:0 8px 18px rgba(0,0,0,.1);
  transition:.25s;
}

.card:hover{
  transform:translateY(-4px);
}

.card:active{
  background:var(--principal);
  color:#fff;
}

.card-text{
  flex:1;
  text-align:left;
  font-size:20px;
  font-weight:bold;
}

.card-text input{
  border:none;
  outline:none;
  font-size:20px;
  font-weight:bold;
  width:100%;
  background:transparent;
  text-transform:uppercase;
}

.numeracao{
  font-size:25px;
  margin-right:15px;
}

.dots{
  font-size:25px;
}

/* BOT√ÉO ADD */
.adc{
  position:fixed;
  bottom:100px;
  left:50%;
  transform:translateX(-50%);
  width:60px;
  height:60px;
  border-radius:50%;
  background:#000;
  color:#fff;
  border:none;
  font-size:26px;
  cursor:pointer;
}

.adc:active{
  background:var(--principal);
}

/* FOOTER */
footer{
  position:fixed;
  bottom:0;
  width:100%;
  background:#b1b1b1;
  display:flex;
  justify-content:space-between;
  transition:.3s;
}

footer button{
  background:none;
  border:none;
  padding:15px 25px;
  font-size:25px;
  cursor:pointer;
}

#home{
  color:var(--principal);
}

.dots{ font-size:25px; color:inherit; text-decoration:none; }

.dots{
  position:relative;
}

.card-menu{
  top:28px;
  right:0;
  transform:scale(0);
}

.card-menu.active{
  transform:scale(1);
}

</style>
</head>

<body>

<header>
  <img src="locate.png">

  <div class="header-spacer"></div>

  <div class="filter-container">
    <i class="fa-solid fa-bars" id="filter-icon"></i>
    <div class="filter-menu" id="filter-menu">
      <button data-action="alfabetica">Ordem Alfab√©tica</button>
      <button data-action="maior">Maior Fila</button>
      <button data-action="menor">Menor Fila</button>
    </div>
  </div>
</header>

<h2>GER√äNCIA DE FILAS</h2>
<div id="number">00 FILAS</div>

<div id="card-container"></div>

<button class="adc" id="adc">+</button>

<footer id="footer">
  <a href="perfilEmpresario.montado.prototipo.html">
    <button><i class="fa-solid fa-user"></i></button>
  </a>

  <a href="gerencia.prototipo.html">
    <button><i class="fa-solid fa-house" id="home"></i></button>
  </a>
</footer>

<script>
/* MENU PRINCIPAL */
const menu = document.getElementById('filter-menu');
document.getElementById('filter-icon').onclick = () =>
  menu.classList.toggle('active');

/* ELEMENTOS */
const container = document.getElementById('card-container');
const number = document.getElementById('number');
const btnAdd = document.getElementById('adc');

/* FILAS */
let filas = JSON.parse(localStorage.getItem('filas')) || [
  { id: Date.now()+1, nome:'FILA01', numero:0 },
  { id: Date.now()+2, nome:'FILA02', numero:0 },
  { id: Date.now()+3, nome:'FILA03', numero:0 }
];

function salvar(){
  localStorage.setItem('filas', JSON.stringify(filas));
  atualizarNumero();
}

function atualizarNumero(){
  number.textContent = `${String(filas.length).padStart(2,'0')} FILAS`;
}

/* RENDER */
function render(){
  container.innerHTML = '';

  filas.forEach((fila) => {
    const card = document.createElement('div');
    card.className = 'card';

    card.innerHTML = `
      <div class="card-text">
        <input value="${fila.nome}">
      </div>

      <div class="numeracao">${fila.numero}</div>

      <div class="dots">
        <i class="fa-solid fa-ellipsis-vertical"></i>

        <div class="filter-menu card-menu">
          <button data-action="editar">EDITAR</button>
          <button data-action="excluir">EXCLUIR</button>
        </div>
      </div>
    `;

    /* üëâ CLICAR NO CARD (VISUALIZAR) */
    card.onclick = () => {
      window.location.href =
        `fila.prototipo.html?id=${fila.id}&modo=visualizar`;
    };

    /* EVITA PROPAGA√á√ÉO */
    card.querySelector('input').onclick = e => e.stopPropagation();
    card.querySelector('.dots').onclick = e => e.stopPropagation();

    /* EDITAR NOME */
    card.querySelector('input').oninput = e => {
      fila.nome = e.target.value.toUpperCase();
      salvar();
    };

    /* DOTS */
    const dotsIcon = card.querySelector('.dots i');
    const cardMenu = card.querySelector('.card-menu');

    dotsIcon.onclick = e => {
      e.stopPropagation();
      document.querySelectorAll('.card-menu')
        .forEach(m => m.classList.remove('active'));
      cardMenu.classList.toggle('active');
    };

    cardMenu.onclick = e => {
      const action = e.target.dataset.action;

      if(action === 'excluir'){
        filas = filas.filter(f => f.id !== fila.id);
        salvar();
        render();
      }

      if(action === 'editar'){
        window.location.href =
          `catalogoEmpresario.prototipo.html?id=${fila.id}&modo=editar`;
      }
    };

    container.appendChild(card);
  });

  atualizarNumero();
}

render();

/* ADD FILA */
btnAdd.onclick = () => {
  filas.push({
    id: Date.now(),
    nome:`FILA${String(filas.length + 1).padStart(2,'0')}`,
    numero:0
  });
  salvar();
  render();
};

/* FILTROS SUPERIORES */
menu.onclick = e => {
  if(!e.target.dataset.action) return;

  if(e.target.dataset.action === 'alfabetica')
    filas.sort((a,b)=>a.nome.localeCompare(b.nome,'pt-BR'));

  if(e.target.dataset.action === 'maior')
    filas.sort((a,b)=>b.numero - a.numero);

  if(e.target.dataset.action === 'menor')
    filas.sort((a,b)=>a.numero - b.numero);

  salvar();
  render();
  menu.classList.remove('active');
};

/* FECHAR MENUS */
document.addEventListener('click', () => {
  document.querySelectorAll('.card-menu')
    .forEach(m => m.classList.remove('active'));
});
</script>




</body>
</html>



